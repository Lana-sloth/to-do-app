<head>
  <title>to-do-app</title>
</head>

<body>
  {{> navbar}}
  {{> main}}
</body>

<!-- TEMPLATES -->

<template name="main">
  <div class="container">
    <div class="row">
      {{# if currentUser}}
        {{> projectList}}
        {{# if projectSelected}}
          {{> taskList}}
        {{/if}}
      {{/if}}
    </div>
  </div>
</template>


<template name="navbar">
  <nav class="navbar navbar-default">
    <div class="container">
      <a class="navbar-brand" href="#">Brand</a>
      <p class="navbar-text navbar-right">{{> loginButtons}}</p>
    </div>
  </nav>
</template>

<template name="chart">
  {{> highchartsHelper chartId="chartId" chartWidth="100%" charHeight="100%" chartObject=topGenresChart}}
  {{> highchartsHelper chartId="id" chartWidth="100%" charHeight="100%" chartObject=topGenresChart}}
</template>

<template name="projectList">
  <div class="col-md-4">
    <div class="well task-card">
      <h2>Projects</h2>
      <br>
      <div class="list-group">
        {{#each projects}}
          {{> project}}
        {{/each}}
      </div>
      <div class="text-right">
        <button type="button" class="js-add-project btn btn-primary btn-sm"> 
          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add a project
        </button>
      </div>
    </div> <!-- end of the well div-->
  </div> <!-- end of the column div-->
</template>

<template name="project">
  <a href="#" class="js-select-project list-group-item" id="{{_id}}">
    {{> editableText collection="projects" field="title"}}
    <button id="{{project_id}}" type="button" class="js-delete-project btn btn-default btn-xs pull-right">
      <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
    </button>
    <br><br>
    <div class="progress">
      <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style = "width: {{progressTask}}%;">
      </div>
    </div>
  </a>
</template>

<template name="taskHeader">
  Tasks of project:<h2>{{title}}</h2>
</template>

<template name="taskList">
  <div class="col-md-4">
    <div class="well task-card">
      {{> taskHeader}}
      <br>
      <div class="list-group">
        {{#each tasks}}
          {{> task}}
        {{/each}}
      </div>
      <div class="text-right">
        <button type="button" class="js-add-task btn btn-primary btn-sm"> 
          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add a task
        </button>
      </div>
    </div> <!-- end of the well div-->
  </div> <!-- end of the column div-->
</template>

<template name="task">
  <a href="#" class="js-select-task list-group-item" id="{{_id}}">
    <div class="checkbox">
      <label>
        <input type="checkbox" class="js-tog-status" checked="{{isFinished}}">
        {{> editableText collection="tasks" field="title"}}
      </label>
        <button type="button" class="js-delete-task btn btn-default btn-xs pull-right">
          <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
        </button>
    </div>
  </a>
</template>