<head>
  <title>to-do-app</title>
</head>

<body>
  {{> navbar}}
  {{> main}}
</body>

<!-- TEMPLATES -->

<!-- <template name="ApplicationLayout">
  {{> yield "navbar"}}
  <div class="container">
    <div class="row">
      {{> yield "projects"}}
      {{> yield "tasks"}}
    </div>
  </div>
</template> -->

<template name="main">
  <div class="container">
    <div class="row">
      {{# if currentUser}}
        {{> projectList}}
        {{> taskList}}
      {{/if}}
    </div>
  </div>
</template>


<template name="navbar">
  <nav class="navbar navbar-default">
    <div class="container">
      <a class="navbar-brand" href="#">Brand</a>
      <p class="navbar-text navbar-right">{{> loginButtons}}</p>
    </div>
  </nav>
</template>

<template name="projectList">
  <div class="col-md-3">
    <div class="well task-card">
      <a href="#"><h2>Projects</h2></a>
      {{> highchartsHelper chartId="test" chartWidth="100px" charHeight="100px" chartObject=topGenresChart}}
      <br>
      <div class="list-group">
        {{#each projects}}
          {{> project}}
        {{/each}}
      </div>
      <div class="text-right">
        <button type="button" class="js-add-project btn btn-primary btn-sm"> 
          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add a project
        </button>
      </div>
    </div> <!-- end of the well div-->
  </div> <!-- end of the column div-->
</template>

<template name="project">
  <a href="#" class="js-select-project list-group-item" id="{{_id}}">
    {{> editableText collection="projects" field="title"}}
    <button type="button" class="js-delete-project btn btn-default btn-xs pull-right">
      <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
    </button>
    <br>{{finishedTasks}}/{{totalTasks}}/{{unfinishedTasks}}
  </a>
</template>

<template name="taskHeader">
  Tasks of "{{title}}" project
</template>

<template name="taskList">
  {{# if projectSelected}}
  <div class="col-md-3">
    <div class="well task-card">
      <a href="#"><h2>{{> taskHeader}}</h2></a>
      <br>
      <div class="list-group">
        {{#each tasks}}
          {{> task}}
        {{/each}}
      </div>
      <div class="text-right">
        <button type="button" class="js-add-task btn btn-primary btn-sm"> 
          <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add a task
        </button>
      </div>
    </div> <!-- end of the well div-->
  </div> <!-- end of the column div-->
  {{/if}}
</template>

<template name="task">
  <a href="#" class="js-select-task list-group-item" id="{{_id}}">
    <input type="checkbox" class="js-tog-finished">
    {{> editableText collection="tasks" field="title"}}
    <button type="button" class="js-delete-task btn btn-default btn-xs pull-right">
      <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
    </button>
  </a>
</template>